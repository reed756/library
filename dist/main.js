(()=>{let e=[];class t{constructor(e,t,a,n){this.title=e,this.author=t,this.number=a,this.read=n}toggle(){return"read"!==this.read?this.read="read":this.read="not read"}}let a=document.querySelector(".content");function n(){let e=document.querySelectorAll("div[data]");for(let t=0;t<e.length;t++)e[t].setAttribute("data",`${t}`)}let l=document.querySelector("#new"),r=document.getElementById("booktitle"),d=document.getElementById("bookauthor"),i=document.getElementById("bookpages"),o=document.querySelector(".error");l.addEventListener("click",(function(){if(r.validity.valueMissing||d.validity.valueMissing||i.validity.valueMissing)return void(o.textContent="Please make sure you fill in the fields for title, author and pages!");var l;l=new t(`${booktitle.value}`,`${bookauthor.value}`,`${bookpages.value}`,`${bookread.value}`),e.push(l),function(){let t=document.createElement("button"),l=document.createElement("button"),r=document.createElement("div");r.textContent=`${e[e.length-1].title} ${e[e.length-1].author} ${e[e.length-1].number} ${e[e.length-1].read}`,r.setAttribute("data",""+(e.length-1)),r.classList.add("colour"),t.innerText="DELETE",t.addEventListener("click",(()=>{e.splice(r.attributes.data.value,1),a.removeChild(r),n(),c()})),l.innerText="READ",l.addEventListener("click",(()=>{e[r.attributes.data.value].toggle(),r.textContent=`${e[r.attributes.data.value].title} ${e[r.attributes.data.value].author} ${e[r.attributes.data.value].number} ${e[r.attributes.data.value].read}`,t.innerText="DELETE",l.innerText="READ",r.appendChild(t),r.appendChild(l),c()})),a.appendChild(r),r.appendChild(t),r.appendChild(l)}(),c(),booktitle.value="",bookauthor.value="",bookpages.value="",bookread.value="",o.textContent=""}));const u=document.getElementById("open-form"),s=document.getElementById("closing-form");u.addEventListener("click",(function(){document.getElementById("myForm").style.display="flex"})),s.addEventListener("click",(function(){document.getElementById("myForm").style.display="none"}));const c=()=>{localStorage.setItem("myLibrary",JSON.stringify(e))};(()=>{if(localStorage.myLibrary){let l=localStorage.getItem("myLibrary");l=JSON.parse(l);for(let e=0;e<l.length;e++)l[e]=new t(`${l[e].title}`,`${l[e].author}`,`${l[e].number}`,`${l[e].read}`);e=l,function(){for(let t=0;t<e.length;t++){let l=document.createElement("button"),r=document.createElement("button"),d=document.createElement("div");d.textContent=`${e[t].title} ${e[t].author} ${e[t].number} ${e[t].read}`,d.setAttribute("data",`${t}`),d.classList.add("colour"),l.innerText="DELETE",l.addEventListener("click",(()=>{e.splice(d.attributes.data.value,1),a.removeChild(d),n(),c()})),r.innerText="READ",r.addEventListener("click",(()=>{e[d.attributes.data.value].toggle(),d.textContent=`${e[d.attributes.data.value].title} ${e[d.attributes.data.value].author} ${e[d.attributes.data.value].number} ${e[d.attributes.data.value].read}`,l.innerText="DELETE",r.innerText="READ",d.appendChild(l),d.appendChild(r),c()})),a.appendChild(d),d.appendChild(l),d.appendChild(r)}}()}})()})();